<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      lang="en"
      xmlns:jsf="http://xmlns.jcp.org/jsf">

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <link href="#{request.contextPath}/resources/images/favicon.png" rel="shortcut icon"/>
        </f:facet>
        <title><ui:insert name="title">Cooperación a C.E.</ui:insert></title>
        <h:outputScript name="js/nanoscroller.js" library="paradise-layout" />
        <h:outputScript name="js/layout.js" library="paradise-layout" />
        <ui:insert name="head"/>

        <style>
            .layout-wrapper .layout-main .layout-content {
                flex: 1 1 auto;
                padding: 0px 13px 13px;
                -moz-transition: margin-left 0.3s;
                -o-transition: margin-left 0.3s;
                -webkit-transition: margin-left 0.3s;
                transition: margin-left 0.3s;
            }
        </style>
    </h:head>

    <h:body styleClass="#{guestPreferences.inputStyleClass}" style="margin: 0 auto; ">
        <div class="layout-wrapper #{guestPreferences.menuMode} " style="background-color: white !important">
            <div class="layout-main">

                <div class="layout-content">
                    <h:form id="frmPrincipal" prependId="false" >
                        <div class="p-grid crud-demo">
                            <div class="p-col-12">
                                <div class="card ui-fluid" jsf:id="divDatos">
                                    <div style="display: #{userBean.centroEscolar?'none':'block'}"> <h5>Datos del Cooperante</h5></div>
                                    <div class="p-field p-grid">
                                        <p:outputLabel value="Nombre Organización:" styleClass="p-col-12 p-mb-3 p-md-3 p-mb-md-0"/>
                                        <div class="p-col-12 p-md-9">
                                            <div class="ui-inputgroup">
                                                <span class="ui-inputgroup-addon">
                                                    <i class="fa fa-building"></i>
                                                </span>
                                                <p:inputText value="#{cooperanteView.cooperante.nombreCooperante}"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-field p-grid">
                                        <p:outputLabel value="Tipo:" styleClass="p-col-12 p-mb-3 p-md-3 p-mb-md-0"/>
                                        <div class="p-col-12 p-md-9">
                                            <p:selectOneMenu value="#{cooperanteView.idTipoCooperante}">
                                                <f:selectItem itemValue="null" itemLabel="Seleccione un valor"/>
                                                <f:selectItems value="#{cooperanteView.lstTipoCooperante}" var="coo" itemValue="#{coo.idTipoCooperante}" itemLabel="#{coo.descripcionCooperante}"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>

                                    <div class="p-field p-grid">
                                        <p:outputLabel value="Nombre Contanto:" styleClass="p-col-12 p-mb-3 p-md-3 p-mb-md-0"/>
                                        <div class="p-col-12 p-md-9">
                                            <div class="ui-inputgroup">
                                                <span class="ui-inputgroup-addon">
                                                    <i class="pi pi-tag"></i>
                                                </span>
                                                <p:inputText id="txtNombreCe" value="#{cooperanteView.cooperante.nombreContacto}" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-field p-grid">
                                        <p:outputLabel value="Teléfono:" styleClass="p-col-12 p-mb-3 p-md-3 p-mb-md-0"/>
                                        <div class="p-col-12 p-md-3">
                                            <div class="ui-inputgroup">
                                                <span class="ui-inputgroup-addon">
                                                    <i class="fa fa-phone" aria-hidden="true"></i>
                                                </span>
                                                <p:inputMask id="txtTelefono" value="#{cooperanteView.cooperante.telefono}" mask="9999-9999"/>
                                            </div>
                                        </div>
                                        <p:outputLabel value="Celular:" styleClass="p-col-12 p-mb-3 p-md-3 p-mb-md-0"/>
                                        <div class="p-col-12 p-md-3">
                                            <div class="ui-inputgroup">
                                                <span class="ui-inputgroup-addon">
                                                    <i class="pi pi-mobile"></i>
                                                </span>
                                                <p:inputMask id="txtCelular" value="#{cooperanteView.cooperante.celular}" mask="9999-9999"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-field p-grid">
                                        <p:outputLabel value="Correo electrónico:" styleClass="p-col-12 p-mb-3 p-md-3 p-mb-md-0"/>
                                        <div class="p-col-12 p-md-9">
                                            <div class="ui-inputgroup">
                                                <span class="ui-inputgroup-addon">
                                                    <i class="pi pi-envelope"></i>
                                                </span>
                                                <p:inputText id="txtCorreoDirector" value="#{cooperanteView.cooperante.correo}"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-field p-grid">
                                        <p:outputLabel value="Nombre Asistente:" styleClass="p-col-12 p-mb-3 p-md-3 p-mb-md-0"/>
                                        <div class="p-col-12 p-md-9">
                                            <div class="ui-inputgroup">
                                                <span class="ui-inputgroup-addon">
                                                    <i class="pi pi-tag"></i>
                                                </span>
                                                <p:inputText id="txtNombreAsistente" value="#{cooperanteView.cooperante.nombreAsistente}" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-field p-grid">
                                        <p:outputLabel value="Dirección" styleClass="p-col-12 p-mb-3 p-md-3 p-mb-md-0"/>
                                        <div class="p-col-12 p-md-9">
                                            <div class="ui-inputgroup">
                                                <span class="ui-inputgroup-addon">
                                                    <i class="pi pi-tag"></i>
                                                </span>
                                                <p:inputTextarea id="txtDireccion" value="#{cooperanteView.cooperante.nombreAsistente}" />
                                            </div>
                                        </div>
                                    </div>

                                    <br/>
                                    <div class="p-field p-grid">
                                        <div class="p-col-12 p-md-2">
                                            <p:commandButton value="Guardar" action="#{cooperanteView.guardarCooperante()}" icon="pi pi-save" rendered="#{not userBean.centroEscolar}"/>
                                            <p:commandButton value="Guardar" action="#{cooperanteView.guardarCooperanteDlg()}" icon="pi pi-save" rendered="#{ userBean.centroEscolar}"/>
                                        </div>
                                        <div class="p-col-12 p-md-2">
                                            <p:commandButton value="Cancelar" icon="pi pi-ban" process="@this" action="inicioManttos.mined?faces-redirect=true" rendered="#{not userBean.centroEscolar}"/>
                                            <p:commandButton value="Cancelar" icon="pi pi-ban" process="@this" action="#{cooperanteView.cancelAddCooperanteDlg()}"/>
                                        </div>
                                        <div class="p-col-12 p-md-2">
                                            <p:commandButton value="Modifcar" icon="pi pi-pencil" process="@this" onclick="PF('dlgCooperante').show();" rendered="#{not userBean.centroEscolar}"/>
                                        </div>
                                    </div>
                                </div>

                                <p:dialog id="dlgCooperante" widgetVar="dlgCooperante" modal="true" closable="false" width="1000" height="500">
                                    <h5>
                                        Listado de Cooperantes
                                    </h5>
                                    <p:dataTable value="#{cooperanteView.lstCooperantes}" var="coo" paginator="true" paginatorPosition="top" rows="10"
                                                 selection="#{cooperanteView.cooperante}" selectionMode="single" rowKey="#{coo.idCooperante}">
                                        <p:ajax update="divDatos" event="rowSelect" listener="#{cooperanteView.onRowSelect}" oncomplete="PF('dlgCooperante').hide();"/>
                                        <p:column headerText="Id" width="10">
                                            <h:outputText value="#{coo.idCooperante}"/>
                                        </p:column>
                                        <p:column headerText="Organización">
                                            <h:outputText value="#{coo.nombreCooperante}"/>
                                        </p:column>
                                        <p:column headerText="Tipo" width="250">
                                            <h:outputText value="#{coo.idTipoCooperante.descripcionCooperante}"/>
                                        </p:column>
                                        <p:column headerText="Contacto" width="300">
                                            <h:outputText value="#{coo.nombreContacto}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:dialog>
                            </div>
                        </div>
                    </h:form>
                </div>

            </div>        
        </div>

        <p:ajaxStatus style="position:fixed;right:60px;bottom:30px">
            <f:facet name="default">
                <h:outputText value=""/>
            </f:facet>
            <f:facet name="start">
                <div id="div_modal" class="layout-content ui-widget-overlay ui-dialog-mask" ></div>
                <div id="ajax_gif" class="ui-tooltip-text ui-corner-all " style="z-index: 1000;">
                    <i class="fa fa-refresh fa-spin ajax-loader" aria-hidden="true" 
                       style="color: #ffffff; font-size: 30px; position: relative;  bottom: -18%;  transform: translateY(-18%);"></i>
                </div>
            </f:facet>

            <f:facet name="complete">
                <h:outputText value=""/>
            </f:facet>
        </p:ajaxStatus>
        <div class="layout-mask modal-in"></div>
        <h:outputStylesheet name="main.css" library="css"/>
        <h:outputStylesheet name="css/primeicons.css" library="paradise-layout" />
        <h:outputStylesheet name="css/primeflex.min.css" library="paradise-layout" />
        <h:outputStylesheet name="css/demo.css" library="demo" />

        <h:outputStylesheet name="css/nanoscroller.css" library="paradise-layout" />
        <h:outputStylesheet name="css/layout-#{guestPreferences.layout}.css" library="paradise-layout" />
    </h:body>

</html>